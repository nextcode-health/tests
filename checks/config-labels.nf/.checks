# apply labels for profile `test1` 
$NXF_RUN -c ../../config-labels.config -profile test1 | tee stdout

< stdout grep "alpha cpus: 2" || false
< stdout grep "alpha queue: std" || false

< stdout grep "beta cpus: 1" || false
< stdout grep "beta queue: small" || false

< stdout grep "delta cpus: 8" || false
< stdout grep "delta queue: big" || false
< stdout grep "gamma cpus: 8" || false
< stdout grep "gamma queue: big" || false

# apply labels for profile `test2` 
$NXF_RUN -c ../../config-labels.config -profile test2 | tee stdout

< stdout grep "beta cpus: 1" || false
< stdout grep "beta queue: small" || false

< stdout grep "alpha cpus: 8" || false
< stdout grep "alpha queue: big" || false
< stdout grep "delta cpus: 8" || false
< stdout grep "delta queue: big" || false
< stdout grep "gamma cpus: 8" || false
< stdout grep "gamma queue: big" || false

# apply labels for profile `test3` 
$NXF_RUN -c ../../config-labels.config -profile test3 | tee stdout

< stdout grep "beta cpus: 5" || false
< stdout grep "beta queue: all" || false
< stdout grep "alpha cpus: 5" || false
< stdout grep "alpha queue: all" || false
< stdout grep "delta cpus: 5" || false
< stdout grep "delta queue: all" || false

< stdout grep "gamma cpus: 6" || false
< stdout grep "gamma queue: foo" || false